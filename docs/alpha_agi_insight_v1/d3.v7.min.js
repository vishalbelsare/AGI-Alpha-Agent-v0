// SPDX-License-Identifier: Apache-2.0
(function(global){"use strict";function Selection(nodes,p){this.nodes=Array.isArray(nodes)?Array.from(nodes):[nodes];this.parent=p}Selection.prototype.append=function(n){var el=document.createElement(n);this.nodes[0].appendChild(el);return new Selection(el,this.nodes[0])};Selection.prototype.attr=function(n,v){if(v===void 0){return this.nodes[0].getAttribute(n)}this.nodes.forEach(function(el){el.setAttribute(n,v)});return this};Selection.prototype.text=function(t){this.nodes.forEach(function(el){el.textContent=t});return this};Selection.prototype.selectAll=function(sel){return new Selection(this.nodes[0].querySelectorAll(sel),this.nodes[0])};Selection.prototype.data=function(d){this._data=d;return this};Selection.prototype.join=function(tag){var p=this.parent||this.nodes[0];p.innerHTML="";this.nodes=[];for(var i=0;i<this._data.length;i++){var el=document.createElement(tag);el.__data__=this._data[i];p.appendChild(el);this.nodes.push(el)}return this};function scaleLinear(){var d=[0,1],r=[0,1];function s(x){var t=(x-d[0])/(d[1]-d[0]);return r[0]+t*(r[1]-r[0])}s.domain=function(v){if(!arguments.length)return d;d=v;return s};s.range=function(v){if(!arguments.length)return r;r=v;return s};return s}function shuffle(a){for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=a[i];a[i]=a[j];a[j]=t}return a}global.d3={select:function(sel){return new Selection(document.querySelector(sel))},scaleLinear:scaleLinear,shuffle:shuffle};})(this);
